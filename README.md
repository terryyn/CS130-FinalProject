# CS130-FinalProject
 
 
A calendar web app that is used inside UCLA. It is able to find available timeslot for those who want to have a meeting and find open study room for them.  
  
Documentation for all backend modules are generated by pydoc, located in Documentation folder, and is to be integrated to be accessible through flask app.  

Backend python code used flake8 linter. 

It's on heroku: [check it out!](https://ucal-frontend.herokuapp.com)

## Start python flask server:
```
python run_server.py db upgrade (this command initialize/upgrade your database)

python run_server.py runserver
```

**If anyone changes database schema, please run the following commands to update and keep track of the database changes:**

```
python run_server.py db migrate -m "commit message"

python run_server.py db upgrade
```

## Run Dockerized Application

```
docker-compose up -d --build
```

Navigate to localhost:3000 to start using the app

## Run locally

Change line 4 in ./app/src/server.js to:

```
const BASE_URI = 'http://localhost:5000';
```

Change line 34 in ./UCal/__init__.py to:

```
response.headers.add('Access-Control-Allow-Origin', 'http://localhost:3000')
```

## Deploying to heroku

Change line 4 in ./app/src/server.js to:

```
const BASE_URI = 'https://ucal-backend.herokuapp.com';
```

Change line 34 in ./UCal/__init__.py to:

```
response.headers.add('Access-Control-Allow-Origin', 'https://ucal-frontend.herokuapp.com')
```

Log in to Heroku using:

```
heroku container:login
docker login --username=_ --password=$(heroku auth:token) registry.heroku.com
```

Create two heroku apps: one for the frontend and one for the backend

To deploy, go to the appropriate directory with the Dockerfile (./app for frontend and ./ for backend), and run:

```
heroku container:push web -a app-name
heroku container:release web -a app-name
```

## Frontend documentation

To run:
`npm start`

The code is organized as follows:
```
/app
|- App.js  // base App file with global logic
|- server.js // HTTP request abstraction layer
|- /components // dummy components (ideally stateless)
|- /containers // typically views which contain actual business logic
    |- /snapshots // frontend test snapshots
|- /styles // contains stylesheets for views
```

